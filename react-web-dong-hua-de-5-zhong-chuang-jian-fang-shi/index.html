<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta data-rh="true" name="twitter:creator" content="@fengshangwuqi"/><meta data-rh="true" name="twitter:image" content="https://blog.fengshangwuqi.com/static/118e8a16f7145b9a3e12f1510523911a/475c0/react-animations.png"/><meta data-rh="true" name="twitter:description" content="原文： React Animations in Depth  by Nader Dabit 在  Tweet  得到很多大佬关于  React Web 动画  不错的的回应，于是决定在这里分享给大家。 以下便是本文要分享的创建  React 动画  的几种方式： CSS animation JS Style React Motion Animated Velocity React CSS…"/><meta data-rh="true" name="twitter:title" content="React Web 动画的 5 种创建方式，每一种都不简单 - 枫上雾棋的 blog"/><meta data-rh="true" name="twitter:card" content="summary_large_image"/><meta data-rh="true" name="og:image" content="https://blog.fengshangwuqi.com/static/118e8a16f7145b9a3e12f1510523911a/475c0/react-animations.png"/><meta data-rh="true" name="og:url" content="https://blog.fengshangwuqi.com/react-web-dong-hua-de-5-zhong-chuang-jian-fang-shi/"/><meta data-rh="true" name="og:type" content="article"/><meta data-rh="true" name="og:description" content="原文： React Animations in Depth  by Nader Dabit 在  Tweet  得到很多大佬关于  React Web 动画  不错的的回应，于是决定在这里分享给大家。 以下便是本文要分享的创建  React 动画  的几种方式： CSS animation JS Style React Motion Animated Velocity React CSS…"/><meta data-rh="true" name="og:title" content="React Web 动画的 5 种创建方式，每一种都不简单 - 枫上雾棋的 blog"/><meta data-rh="true" name="keywords" content="React Web 动画的 5 种创建方式，每一种都不简单, 枫上雾棋的 blog, 枫上雾棋, React, CSS, Animation"/><meta data-rh="true" name="description" content="原文： React Animations in Depth  by Nader Dabit 在  Tweet  得到很多大佬关于  React Web 动画  不错的的回应，于是决定在这里分享给大家。 以下便是本文要分享的创建  React 动画  的几种方式： CSS animation JS Style React Motion Animated Velocity React CSS…"/><meta name="generator" content="Gatsby 4.18.2"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><title data-rh="true">React Web 动画的 5 种创建方式，每一种都不简单 - 枫上雾棋的 blog</title><link data-rh="true" rel="canonical" href="https://blog.fengshangwuqi.com/react-web-dong-hua-de-5-zhong-chuang-jian-fang-shi/"/><script data-rh="true" type="application/ld+json">[{"@context":"http://schema.org","@type":"WebSite","url":"https://blog.fengshangwuqi.com/react-web-dong-hua-de-5-zhong-chuang-jian-fang-shi/","name":"React Web 动画的 5 种创建方式，每一种都不简单 - 枫上雾棋的 blog"},{"@context":"http://schema.org","@type":"BlogPosting","url":"https://blog.fengshangwuqi.com/react-web-dong-hua-de-5-zhong-chuang-jian-fang-shi/","name":"React Web 动画的 5 种创建方式，每一种都不简单 - 枫上雾棋的 blog","headline":"React Web 动画的 5 种创建方式，每一种都不简单 - 枫上雾棋的 blog","image":"https://blog.fengshangwuqi.com/static/118e8a16f7145b9a3e12f1510523911a/475c0/react-animations.png","description":"原文： React Animations in Depth  by Nader Dabit 在  Tweet  得到很多大佬关于  React Web 动画  不错的的回应，于是决定在这里分享给大家。 以下便是本文要分享的创建  React 动画  的几种方式： CSS animation JS Style React Motion Animated Velocity React CSS…","author":{"@type":"Person","name":"枫上雾棋"},"publisher":{"@type":"Person","name":"枫上雾棋"},"datePublished":"2017-08-14"}]</script><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><link rel="alternate" type="application/rss+xml" title="fengshangwuqi&#x27;s blog RSS Feed" href="/rss.xml"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css-global 1xs1vri">0 html{line-height:1.15;-webkit-text-size-adjust:100%;-moz-text-size-adjust:100%;-ms-text-size-adjust:100%;text-size-adjust:100%;}0 body{margin:0;}0 main{display:block;}0 h1{font-size:2em;margin:0.67em 0;}0 hr{box-sizing:content-box;height:0;overflow:visible;}0 pre{font-family:monospace,monospace;font-size:1em;}0 a{background-color:transparent;}0 abbr[title]{border-bottom:none;-webkit-text-decoration:underline;text-decoration:underline;}0 b,0 strong{font-weight:bolder;}0 code,0 kbd,0 samp{font-family:monospace,monospace;font-size:1em;}0 small{font-size:80%;}0 sub,0 sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;}0 sub{bottom:-0.25em;}0 sup{top:-0.5em;}0 img{border-style:none;}0 button,0 input,0 optgroup,0 select,0 textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0;}0 button,0 input{overflow:visible;}0 button,0 select{text-transform:none;}0 button,0 html [type="button"],0 [type="reset"],0 [type="submit"]{-webkit-appearance:button;}0 button::-moz-focus-inner,0 [type="button"]::-moz-focus-inner,0 [type="reset"]::-moz-focus-inner,0 [type="submit"]::-moz-focus-inner{border-style:none;padding:0;}0 button:-moz-focusring,0 [type="button"]:-moz-focusring,0 [type="reset"]:-moz-focusring,0 [type="submit"]:-moz-focusring{outline:1px dotted ButtonText;}0 fieldset{padding:0.35em 0.625em 0.75em;}0 legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}0 progress{vertical-align:baseline;}0 textarea{overflow:auto;}0 [type="checkbox"],0 [type="radio"]{box-sizing:border-box;padding:0;}0 [type="number"]::-webkit-inner-spin-button,0 [type="number"]::-webkit-outer-spin-button{height:auto;}0 [type="search"]{-webkit-appearance:textfield;outline-offset:-2px;}0 [type="search"]::-webkit-search-decoration{-webkit-appearance:none;}0::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}0 details{display:block;}0 summary{display:-webkit-box;display:-webkit-list-item;display:-ms-list-itembox;display:list-item;}0 template{display:none;}0 [hidden]{display:none;}1 abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;}</style><style data-emotion="css-global 1otop4o">body{margin:0;min-width:320px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Helvetica,"PingFang SC","Hiragino Sans GB","Microsoft YaHei",SimSun,sans-serif;color:rgba(0,0,0,0.85);background:#fff;}a{color:#3c2584;-webkit-text-decoration:none;text-decoration:none;}h1,h2,h3,h4,h5,h6{margin:0;}ul,li{margin:0;padding:0;}dialog{padding:0;width:100%;max-width:47.375rem;border-radius:16px;border:0;overflow:hidden;}dialog::backdrop{background-color:rgba(0,0,0,0.25);}input::-webkit-input-placeholder{color:#cbd5e0;}input::-moz-placeholder{color:#cbd5e0;}input:-ms-input-placeholder{color:#cbd5e0;}input::placeholder{color:#cbd5e0;}svg{fill:#3c2584;vertical-align:middle;}</style><style data-emotion="css-global 1thn7hv">html{font-size:1rem;}</style><style data-emotion="css bbj177">.css-bbj177{border-top-width:8px;border-top-style:solid;border-top-color:#3c2584;}</style><div class="css-bbj177"></div><style data-emotion="css xu7xrg">.css-xu7xrg{position:relative;margin:0 auto;max-width:1200px;}@media (min-width: 1024px){.css-xu7xrg{margin:0 auto 4rem;}}</style><div class="css-xu7xrg"><style data-emotion="css-global gx5x2v">.gatsby-highlight{margin-top:25px;margin-right:25px;margin-bottom:25px;margin-left:25px;padding-top:25px;padding-right:25px;padding-bottom:25px;padding-left:25px;border-radius:8px;background:#282a36;overflow:scroll;}.gatsby-highlight pre[class*="language-"],.gatsby-highlight code[class*="language-"]{margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;line-height:1.45;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:0.85px;color:#fff;}.gatsby-highlight-code-line{margin-top:0;margin-right:-25px;margin-bottom:0;margin-left:-25px;padding-top:0.125rem;padding-right:25px;padding-bottom:0.125rem;padding-left:25px;display:block;background:#2e3440;}.token.comment{color:#6272a4;}.token.boolean,.token.number,.token.constant,.token.symbol,.token.deleted{color:#bd93f9;}.token.class-name,.token.attr-name,.token.rule,.token.selector{color:#50fa7b;}.token.function,.token.property,.token.operator{color:#66d9ef;}.token.punctuation{color:#fff;}a.vglnk,.token.url,.token.attr-value,.token.string,.token.string a,.token.char,.token.builtin,.token.inserted,.token.entity{color:#f1fa8c;}.token.regex,.token.keyword,.token.tag,.token.important,.token.variable{color:#ff79c6;}.token.important,.token.bold{font-weight:bold;}.token.italic{font-style:italic;}.token.entity{cursor:help;}.namespace{opacity:0.7;}</style><style data-emotion="css 69i1ev">.css-69i1ev{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-69i1ev"><style data-emotion="css 12j8t3d">.css-12j8t3d{height:60px;}@media (min-width: 640px){.css-12j8t3d{height:80px;}}</style><style data-emotion="css t69gxk">.css-t69gxk{height:50px;list-style:none;overflow:hidden;height:60px;}@media (min-width: 640px){.css-t69gxk{height:80px;}}</style><ul class="css-t69gxk"><style data-emotion="css 1uxqxt6">.css-1uxqxt6{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;padding:0 0.5rem;float:left;}@media (min-width: 640px){.css-1uxqxt6{padding:0 1rem;}}</style><li class="css-1uxqxt6"><style data-emotion="css 9ybir">.css-9ybir{display:none;font-size:1.5rem;}@media (min-width: 1024px){.css-9ybir{font-size:1.875rem;}}</style><a class="css-9ybir" href="/">枫上雾棋的日志</a></li></ul><style data-emotion="css axo7pa">.css-axo7pa{display:block;height:60px;}@media (min-width: 640px){.css-axo7pa{display:block;height:80px;}}</style><style data-emotion="css 159pr1g">.css-159pr1g{height:50px;list-style:none;overflow:hidden;display:block;height:60px;}@media (min-width: 640px){.css-159pr1g{display:block;height:80px;}}</style><ul class="css-159pr1g"><li class="css-1uxqxt6"><a href="/archive">归档</a></li><li class="css-1uxqxt6"><a href="/">最新</a></li><li class="css-1uxqxt6"><a href="/rss.xml" target="_blank" rel="noopener noreferrer">RSS</a></li><li class="css-1uxqxt6"><a href="https://github.com/FengShangWuQi/fengshangwuqi.github.io/releases" target="_blank" rel="noopener noreferrer"><style data-emotion="css dytt20">.css-dytt20{position:relative;border-width:1px;border-style:solid;border-color:#3c2584;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;-user-select:none;padding:0.25rem 0.75rem;border-radius:4px;outline:0;cursor:pointer;-webkit-transition:all 0.2s;transition:all 0.2s;color:#fff;background:#3c2584;}.css-dytt20:hover{border-width:1px;border-style:solid;border-color:#4e30ac;background:#4e30ac;}</style><button type="button" class="css-dytt20">订阅</button></a></li></ul></div><style data-emotion="css njb4cg">.css-njb4cg{position:relative;height:400px;width:100%;}</style><div class="css-njb4cg"><style data-emotion="css f8znwd">.css-f8znwd{top:0;right:0;bottom:0;left:0;position:absolute;background:transparent;box-shadow:inset 120px 100px 500px 50px rgba(0, 0, 0, 0.75);z-index:10;}</style><div class="css-f8znwd"></div><style data-emotion="css 13udsys">.css-13udsys{height:100%;}</style><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper css-13udsys"><div aria-hidden="true" style="padding-top:50.33333333333333%"></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear" decoding="async" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAACF0lEQVQoz0XK0WtSYRzG8ed93+Oxtau6qouCYDAI+g/6I9wqZWA2lwtCa3qOsTo657HCowdXbeqaG8lwW6DHbME51FBxjS7qJpwXjjFGEBXtpiZtdLdwKMHn4vl9+QGKzqkGVQ3EdcR0KB0kplNFp4oBRWcxg8R0xIyOuIGYThQdkDUyUSRSEVIRwSJkDbJG5SKVi5ALJKIdj3bEZAGhPEJ5MpnvFHp/mZSyqGdQzxAtS8eXaHCJBJcRyJ2WXp6RVhDIcYFlKuXoI42ob0h8lURLNLRCpRyYd4F+fo6jFI5S5NMsN7ZAx+cv+Bc94quPYqUpVPv9i7iXMfnmSHULXw6x08LmT5ooMd8cOHeSfEjhMI2DNK2lcHvmlHc26Vv9LtR+Ce9bwsamUOnzzsP9hFW2sHuA7X009phaYO6nYC6V1KbRSmE/xcrTcKln3c/eeo1vwvoPYb0lbDR85T53Eq4oqzTx9S92/6CxRx4vsVEFnOMhKU1hJ4mdGaZNwRE5f0tdufu6PKb/FjeavnL/aAI3I/ywTLJrqDaxtol3dRp+wTnCMA1JLCRz6WhbUGZDUu/1iYvO6KXh6GVn4tyNCOwPzPaA2TFhHglzI3KbK2JyTprsAfA2kb8i8IOieVDkr4q8TTTZRGL1oc3LrMIJm7/9YxN5q8Bf67KKvM0Ps8VtHuiydPRYPL0Dd05aPD2W//GYp6t9/gPOQ+5+ktsChwAAAABJRU5ErkJggg==" alt=""/><picture><source type="image/webp" data-srcset="/static/118e8a16f7145b9a3e12f1510523911a/678bf/react-animations.webp 750w,/static/118e8a16f7145b9a3e12f1510523911a/938de/react-animations.webp 900w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" data-src="/static/118e8a16f7145b9a3e12f1510523911a/475c0/react-animations.png" data-srcset="/static/118e8a16f7145b9a3e12f1510523911a/ea251/react-animations.png 750w,/static/118e8a16f7145b9a3e12f1510523911a/475c0/react-animations.png 900w" alt="React Web 动画的 5 种创建方式，每一种都不简单"/></picture><noscript><picture><source type="image/webp" srcSet="/static/118e8a16f7145b9a3e12f1510523911a/678bf/react-animations.webp 750w,/static/118e8a16f7145b9a3e12f1510523911a/938de/react-animations.webp 900w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" src="/static/118e8a16f7145b9a3e12f1510523911a/475c0/react-animations.png" srcSet="/static/118e8a16f7145b9a3e12f1510523911a/ea251/react-animations.png 750w,/static/118e8a16f7145b9a3e12f1510523911a/475c0/react-animations.png 900w" alt="React Web 动画的 5 种创建方式，每一种都不简单"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1)}}</script></div></div><style data-emotion="css 1325usx">.css-1325usx{padding:0.25rem 1.5rem 3.5rem;overflow:hidden;box-shadow:inset 0 0 30px rgba(0,0,0,0.1);}@media (min-width: 1024px){.css-1325usx{padding:0.25rem 2rem 3.5rem;}}</style><div class="css-1325usx"><style data-emotion="css 1d53jwi">.css-1d53jwi{line-height:1.675;}.css-1d53jwi h1,.css-1d53jwi h2{border-bottom-width:3px;border-bottom-style:solid;border-bottom-color:#3c2584;padding-bottom:0.5rem;font-weight:normal;}.css-1d53jwi h1{font-size:24px;margin-top:2.5rem;margin-right:0;margin-bottom:0.5rem;margin-left:0;}@media (min-width: 640px){.css-1d53jwi h1{font-size:calc(24px + (8) * (100vw - 640px) / (640));}}@media (min-width: 1280px){.css-1d53jwi h1{font-size:32px;}}.css-1d53jwi h2{font-size:20px;margin-top:2rem;margin-right:0;margin-bottom:0.25rem;margin-left:0;}@media (min-width: 640px){.css-1d53jwi h2{font-size:calc(20px + (5) * (100vw - 640px) / (640));}}@media (min-width: 1280px){.css-1d53jwi h2{font-size:25px;}}.css-1d53jwi h3{font-size:18px;margin-top:2.5rem;margin-right:0;margin-bottom:0;margin-left:0;-webkit-box-decoration-break:clone;box-decoration-break:clone;}@media (min-width: 640px){.css-1d53jwi h3{font-size:calc(18px + (4) * (100vw - 640px) / (640));}}@media (min-width: 1280px){.css-1d53jwi h3{font-size:22px;}}.css-1d53jwi h2+h3{margin-top:1.5rem;}.css-1d53jwi p{font-size:15px;margin-top:1.5rem;margin-right:0;margin-bottom:0;margin-left:0;}@media (min-width: 640px){.css-1d53jwi p{font-size:calc(15px + (1) * (100vw - 640px) / (640));}}@media (min-width: 1280px){.css-1d53jwi p{font-size:16px;}}.css-1d53jwi h3+p{margin-top:0.75rem;}.css-1d53jwi ul{margin-top:1.5rem;margin-right:2rem;margin-bottom:1.5rem;margin-left:2rem;}.css-1d53jwi li>ol,.css-1d53jwi li>ul{margin-top:1.5rem;margin-right:2rem;margin-bottom:1.5rem;margin-left:2rem;}.css-1d53jwi img{display:block;margin:0 auto;max-width:600px;}.css-1d53jwi blockquote{margin-top:1.5rem;margin-right:0;margin-bottom:0;margin-left:0;padding-top:1.25rem;padding-right:1rem;padding-bottom:1.25rem;padding-left:1rem;border-left-width:9px;border-left-style:solid;border-left-color:#ffe564;background:rgba(255,229,100,0.3);overflow:auto;}.css-1d53jwi blockquote p:first-of-type{margin:0;}.css-1d53jwi a:not(.anchor):not(.gatsby-resp-image-link):not(.vglnk){border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#ddd;background:rgba(221,221,221,0.3);}.css-1d53jwi .twitter-content{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}</style><div class="css-1d53jwi"><h1>React Web 动画的 5 种创建方式，每一种都不简单</h1><style data-emotion="css 1gammwy">.css-1gammwy{margin-top:5px;}</style><div class="css-1gammwy"><style data-emotion="css 6ptu4e">.css-6ptu4e{margin-right:4px;font-weight:bold;}</style><style data-emotion="css eoc4g">.css-eoc4g{padding-top:2px;padding-right:5px;padding-bottom:2px;padding-left:5px;display:inline-block;font-size:0.75rem;border-radius:4px;color:#5fd9fb;background:#1a1c22;margin-right:4px;font-weight:bold;}</style><div class="css-eoc4g">#<!-- -->React</div><style data-emotion="css bgedct">.css-bgedct{padding-top:2px;padding-right:5px;padding-bottom:2px;padding-left:5px;display:inline-block;font-size:0.75rem;border-radius:4px;color:#ffffff;background:#9c8886;margin-right:4px;font-weight:bold;}</style><div class="css-bgedct">#<!-- -->CSS</div><style data-emotion="css 1766p1o">.css-1766p1o{padding-top:2px;padding-right:5px;padding-bottom:2px;padding-left:5px;display:inline-block;font-size:0.75rem;border-radius:4px;color:#606570;background:#d6d9e0;margin-right:4px;font-weight:bold;}</style><div class="css-1766p1o">#<!-- -->Animation</div></div><p>原文：<a href="https://medium.com/react-native-training/react-animations-in-depth-433e2b3f0e8e" target="_blank" rel="noopener noreferrer">React Animations in Depth</a> by Nader Dabit</p><blockquote><p>在 <a href="http://t.cn/RQVluB2" target="_blank" rel="noopener noreferrer">Tweet</a> 得到很多大佬关于 <strong>React Web 动画</strong> 不错的的回应，于是决定在这里分享给大家。</p></blockquote><p>以下便是本文要分享的创建 <strong>React 动画</strong> 的几种方式：</p><ul><li>CSS animation</li><li>JS Style</li><li><a href="http://t.cn/RLeuFGX" target="_blank" rel="noopener noreferrer">React Motion</a></li><li><a href="http://t.cn/R9d015g" target="_blank" rel="noopener noreferrer">Animated</a></li><li><a href="http://t.cn/R9dOzS1" target="_blank" rel="noopener noreferrer">Velocity React</a></li></ul><h2 id="css-animation" style="position:relative"><a href="#css-animation" aria-label="css animation permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSS animation</h2><p>给元素添加 <strong>class</strong> 是最简单，最常见的书写方式，如果你的 app 正在使用 <strong>CSS</strong>，那么这将是你最愉快的选择。</p><p>赞同者：</p><ul><li>我们只需修改 <strong>opacity</strong> 和 <strong>transform</strong> 这样的属性，就可构建基本的动画；</li><li>在组件中，我们可以非常容易地通过 <strong>state</strong> 去更新这些值；</li></ul><p>反对者：</p><ul><li>这种方式并 <strong>不跨平台</strong>，在 <strong>React Native</strong> 中就不适用；</li><li>对于较复杂的动画，这种方式难以控制；</li></ul><p>接下来，我们通过一个简单的 demo 来体验一下这种创建方式：当 <strong>input focus</strong> 的时候，我们增加它的宽度。</p><p>首先，我们创建两个 <strong>input</strong> 要用到的 <strong>class</strong>：</p><div class="gatsby-highlight" data-language="css"><pre class="language-css"><code class="language-css"><span class="token selector">.input</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #dddddd<span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> width 0.35s linear<span class="token punctuation">;</span>
  <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.input-focused</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 240px<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><p>一个是它原始的样式，一个是它 <strong>focus</strong> 后的样式。</p><p>下面，我们就开始书写我们的 <strong>React</strong> 组件。</p><p><img src="/34e12b363e28584285837b5b9fbaca03/react-animations-css-animation.gif" alt="animation"/></p><div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">focused</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_input<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;focus&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>focus<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_input<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;blur&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>focus<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">focus</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">prevState</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">focused</span><span class="token operator">:</span> <span class="token operator">!</span>prevState<span class="token punctuation">.</span>focused<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>App<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
            <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">input</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_input <span class="token operator">=</span> input<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
            <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">&quot;input&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>focused <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;input-focused&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>
              <span class="token string">&quot; &quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">}</span></span>
          <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div><ul><li>我们有一个 <strong>focused</strong> 的 <code class="language-text">state</code>，初始值为 <strong>false</strong>，我们通过更新该值来创建我们的动画；</li><li>在 <code class="language-text">componentDidMount</code> 时，我们添加两个监听器，一个 <strong>focus</strong>，一个 <strong>blur</strong>，指定的回调函数都是 <strong>focus</strong>；</li><li><code class="language-text">focus</code> 方法会获取之前 <strong>focused</strong> 的值，并负责切换该值；</li><li>在 <code class="language-text">render</code> 中，我们通过 <strong>state</strong> 来改变 <strong>input</strong> 的 <strong>classNames</strong>，从而实现我们的动画；</li></ul><h2 id="js-style" style="position:relative"><a href="#js-style" aria-label="js style permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JS Style</h2><p><strong>JavaScript styles</strong> 跟 <strong>CSS</strong> 中的 <strong>class</strong> 类似。</p><p>赞同者:</p><ul><li>跟 <strong>CSS</strong> 动画一样，且它的表现更为清晰，且可以不必依赖 <strong>CSS</strong>；</li></ul><p>反对者：</p><ul><li>跟 <strong>CSS</strong> 动画一样，<strong>不跨平台</strong>，且动画一旦复杂，也难以控制；</li></ul><p>在下面的 demo 中，我们将创建一个 <strong>input</strong>，当用户输入时，我们将一个 <strong>button</strong> 从 <strong>disable</strong> 转变为 <strong>enable</strong>。</p><p><img src="/204b6a2d062a79cb40464757c4080aec/react-animations-js-style.gif" alt="style"/></p><div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">disabled</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function-variable function">onChange</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> length <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">disabled</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">disabled</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> disabled <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
    <span class="token keyword">const</span> label <span class="token operator">=</span> disabled <span class="token operator">?</span> <span class="token string">&quot;Disabled&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Submit&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>App<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>input<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>onChange<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>
          <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>
            <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            styles<span class="token punctuation">.</span>button<span class="token punctuation">,</span>
            <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>disabled <span class="token operator">&amp;&amp;</span> styles<span class="token punctuation">.</span>buttonEnabled<span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">}</span></span>
          <span class="token attr-name">disabled</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>disabled<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token punctuation">{</span>label<span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> styles <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">App</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">display</span><span class="token operator">:</span> <span class="token string">&quot;flex&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">justifyContent</span><span class="token operator">:</span> <span class="token string">&quot;left&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">input</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">marginRight</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">190</span><span class="token punctuation">,</span>
    <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    <span class="token literal-property property">border</span><span class="token operator">:</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> <span class="token string">&quot;#ddd&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">outline</span><span class="token operator">:</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">button</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">90</span><span class="token punctuation">,</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">43</span><span class="token punctuation">,</span>
    <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token number">17</span><span class="token punctuation">,</span>
    <span class="token literal-property property">border</span><span class="token operator">:</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">borderRadius</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token literal-property property">transition</span><span class="token operator">:</span> <span class="token string">&quot;.25s all&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cursor</span><span class="token operator">:</span> <span class="token string">&quot;pointer&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">buttonEnabled</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">120</span><span class="token punctuation">,</span>
    <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> <span class="token string">&quot;#ffc107&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div><ul><li>我们有一个 <strong>disabled</strong> 的 <code class="language-text">state</code>，初始值为 <strong>true</strong>；</li><li><code class="language-text">onChange</code> 方法会获取用户的输入，当输入非空时，就切换 <strong>disabled</strong> 的值；</li><li>根据 <strong>disabled</strong> 的值，确定是否将 <code class="language-text">buttonEnabled</code> 添加到 <strong>button</strong> 中；</li></ul><h2 id="react-motion" style="position:relative"><a href="#react-motion" aria-label="react motion permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>React Motion</h2><p><strong>React Motion</strong> 是 <a href="https://medium.com/@chenglou" target="_blank" rel="noopener noreferrer">Cheng Lou</a> 书写的一个非常不错的开源项目。它的思想是可以对 <strong>Motion</strong> 组件进行简单的样式设置，然后你就可以在回调函数中通过这些值，享受动画带来的乐趣。</p><p>对于绝大多数的动画组件，我们往往不希望对动画属性（宽高、颜色等）的变化时间做硬编码处理，<strong>react-motion</strong> 提供的 <code class="language-text">spring</code> 函数就是用来解决这一需求的，它可以逼真地模仿真实的物理效果，也就是我们常见的各类 <strong>缓动效果</strong>。</p><p>下面是一个简单的 demo：</p><div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Motion</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token function">spring</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> x <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translateX(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>x<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px)</span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Motion</span></span><span class="token punctuation">&gt;</span></span></code></pre></div><p>这是官方提供的几个 demo，可谓是不看不知道，一看吓一跳。</p><ul><li><a href="http://t.cn/R9epBQV" target="_blank" rel="noopener noreferrer">Chat Heads</a></li><li><a href="http://t.cn/R9eprR8" target="_blank" rel="noopener noreferrer">Draggable Balls</a></li><li><a href="http://t.cn/R9epdOH" target="_blank" rel="noopener noreferrer">TodoMVC List Transition</a></li><li><a href="http://t.cn/R9epgoj" target="_blank" rel="noopener noreferrer">Water Ripples</a></li><li><a href="http://t.cn/R9epe9u" target="_blank" rel="noopener noreferrer">Draggable List</a></li></ul><p>赞同者：</p><ul><li><strong>React Motion</strong> 可以在 <strong>React Web</strong> 中使用，也可以在 <strong>React Native</strong> 中使用，因为它 <strong>跨平台</strong>；</li><li>其中的 <strong>spring</strong> 概念最开始对我来说很陌生，然而上手之后，发现它真的很神奇，并且，它有很详细的 <strong>API</strong>；</li></ul><p>反对者：</p><ul><li>在某些情况下，他不如纯 <strong>CSS / JS</strong> 动画；</li><li>虽然它有不错的 <strong>API</strong>，容易上手，但也需要学习成本；</li></ul><p>首先使用 <strong>yarn</strong> 或 <strong>npm</strong> 安装：</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">yarn</span> <span class="token function">add</span> react-motion</code></pre></div><p>在下面的 demo 中，我们将创建一个 <strong>dropdown</strong> 菜单，当点击按钮时，下拉菜单友好展开。</p><p><img src="/e49f3a4bf698d2c8ad341252be5fd4d6/react-animations-react-motion.gif" alt="motion"/></p><div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> Motion<span class="token punctuation">,</span> spring <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-motion&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">38</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function-variable function">animate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">height</span><span class="token operator">:</span> state<span class="token punctuation">.</span>height <span class="token operator">===</span> <span class="token number">233</span> <span class="token operator">?</span> <span class="token number">38</span> <span class="token operator">:</span> <span class="token number">233</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>App<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>button<span class="token punctuation">}</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>animate<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          Animate
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Motion</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token function">spring</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> height <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> styles<span class="token punctuation">.</span>menu<span class="token punctuation">,</span> <span class="token punctuation">{</span> height <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>selection<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Selection 1</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>selection<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Selection 2</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>selection<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Selection 3</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>selection<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Selection 4</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>selection<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Selection 5</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>selection<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Selection 6</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
          <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Motion</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> styles <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">menu</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">marginTop</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
    <span class="token literal-property property">border</span><span class="token operator">:</span> <span class="token string">&quot;2px solid #ddd&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">overflow</span><span class="token operator">:</span> <span class="token string">&quot;hidden&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">button</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">display</span><span class="token operator">:</span> <span class="token string">&quot;flex&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">45</span><span class="token punctuation">,</span>
    <span class="token literal-property property">justifyContent</span><span class="token operator">:</span> <span class="token string">&quot;center&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">alignItems</span><span class="token operator">:</span> <span class="token string">&quot;center&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">border</span><span class="token operator">:</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">borderRadius</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> <span class="token string">&quot;#ffc107&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cursor</span><span class="token operator">:</span> <span class="token string">&quot;pointer&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">selection</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">margin</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token literal-property property">borderBottom</span><span class="token operator">:</span> <span class="token string">&quot;1px solid #ededed&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div><ul><li>我们从 <strong>react-motion</strong> 中 <strong>import</strong> <code class="language-text">Motion</code> 和 <code class="language-text">spring</code>；</li><li>我们有一个 <strong>height</strong> 的 <code class="language-text">state</code>，初始值为 <strong>38</strong>，代表 <strong>menu</strong> 的高度；</li><li><code class="language-text">animate</code> 方法设置 <strong>menu</strong> 的 <strong>height</strong>，切换 <strong>height</strong> 的值；</li><li>在 <code class="language-text">render</code> 中，我们使用 <strong>Motion</strong> 组件包装整个 <strong>p</strong> 标签列表，将 <strong>state.height</strong> 的当前值设为组件的 <strong>height</strong>，然后在组件的回调函数中使用该值作为整个下拉的高度；</li><li>当按钮被点击时，我们通过 <code class="language-text">this.animate</code> 切换下拉的高度；</li></ul><h2 id="animated" style="position:relative"><a href="#animated" aria-label="animated permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Animated</h2><p><strong>Animated</strong> 是基于 <strong>React Native</strong> 使用的同一个动画库建立起来的。</p><p>它背后的思想是创建 <strong>声明式动画</strong>，通过传递配置对象来控制动画。</p><p>赞同者：</p><ul><li><strong>跨平台</strong>，它在 <strong>React Native</strong> 中已经非常稳定，如果你在 <strong>React Native</strong> 中使用过，那么你将不用再重复学习；</li><li>其中的 <code class="language-text">interpolate</code> 是一个神奇的插值函数，我们将在下面看到；</li></ul><p>反对者：</p><ul><li>目前不是 <strong>100%</strong> 的稳定，在老的浏览器中的，存在前缀和性能的问题；</li></ul><p>首先使用 <strong>yarn</strong> 或 <strong>npm</strong> 安装：</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">yarn</span> <span class="token function">add</span> animated</code></pre></div><p>在下面的 demo 中，我们将模拟在提交表单成功后显示的动画 <strong>message</strong>。</p><p><img src="/bfcec915be7c2143a50deaeaa3edd1f0/react-animations-Animated.gif" alt="animated"/></p><div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">import</span> Animated <span class="token keyword">from</span> <span class="token string">&quot;animated/lib/targets/react-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Easing <span class="token keyword">from</span> <span class="token string">&quot;animated/lib/Easing&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">AnimatedApp</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  animatedValue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animated<span class="token punctuation">.</span>Value</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function-variable function">animate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>animatedValue<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    Animated<span class="token punctuation">.</span><span class="token function">timing</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>animatedValue<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">toValue</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
      <span class="token literal-property property">easing</span><span class="token operator">:</span> Easing<span class="token punctuation">.</span><span class="token function">elastic</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> marginLeft <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>animatedValue<span class="token punctuation">.</span><span class="token function">interpolate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">inputRange</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">outputRange</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>App<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>button<span class="token punctuation">}</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>animate<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          Animate
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Animated.div</span>
          <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> styles<span class="token punctuation">.</span>box<span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>animatedValue<span class="token punctuation">,</span>
            marginLeft<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Thanks for your submission!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Animated.div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> styles <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">button</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">display</span><span class="token operator">:</span> <span class="token string">&quot;flex&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">125</span><span class="token punctuation">,</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
    <span class="token literal-property property">justifyContent</span><span class="token operator">:</span> <span class="token string">&quot;center&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">alignItems</span><span class="token operator">:</span> <span class="token string">&quot;center&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">border</span><span class="token operator">:</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">borderRadius</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> <span class="token string">&quot;#ffc107&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cursor</span><span class="token operator">:</span> <span class="token string">&quot;pointer&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">box</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">display</span><span class="token operator">:</span> <span class="token string">&quot;inline-block&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">marginTop</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token string">&quot;0.6rem 2rem&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token string">&quot;0.8rem&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">border</span><span class="token operator">:</span> <span class="token string">&quot;1px #eee solid&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">borderRadius</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token literal-property property">boxShadow</span><span class="token operator">:</span> <span class="token string">&quot;0 2px 8px rgba(0,0,0,.2)&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div><ul><li>从 <strong>animated</strong> 中 <strong>import</strong> <code class="language-text">Animated</code> 和 <code class="language-text">Easing</code>；</li><li>用 <code class="language-text">new Animated.Value(0)</code> 创建一个值为 <strong>0</strong> 的类属性 - <strong>animatedValue</strong>；</li><li>创建 <code class="language-text">animate</code> 方法，处理所有的动画，首先通过 <code class="language-text">this.animatedValue.setValue(0)</code> 初始化动画值，实现的效果就是每次重新执行该动画，然后调用 <code class="language-text">Animated.timing</code>，<strong>animatedValue</strong> 作为第一个参数传递，配置对象作为第二个参数，一个设置最终动画值，一个设置持续时间，一个设置 <strong>缓动效果</strong>。</li><li>在 <code class="language-text">render</code> 中，我们用 <code class="language-text">interpolate</code> 方法创建 <strong>marginLeft</strong> 对象，包含 <strong>inputRange</strong> 和 <strong>outputRange</strong> 数组，我们使用此对象作为 <strong>UI</strong> 中 <strong>message</strong> 的 <strong>style</strong> 属性；</li><li>我们使用 <code class="language-text">Animated.div</code> 替代默认的 <strong>div</strong>；</li><li>我们将 <strong>animatedValue</strong> 和 <strong>marginLeft</strong> 作为 <code class="language-text">Animated.div</code> 的 <strong>style</strong> 属性；</li></ul><h2 id="velocity-react" style="position:relative"><a href="#velocity-react" aria-label="velocity react permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Velocity React</h2><p><strong>Velocity React</strong> 是基于已经存在的 <strong>Velocity</strong> 建立起来的。</p><p>赞同者：</p><ul><li>上手容易，<strong>API</strong> 简单明了，相对其他库更易于掌握；</li></ul><p>反对者：</p><ul><li>有些不得不克服的问题，比如 <strong>componentDidMount</strong> 后动画并没有真正地起作用等；</li><li><strong>不跨平台</strong>；</li></ul><p>下面是一个简单的 demo：</p><div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">VelocityComponent</span></span>
  <span class="token attr-name">animation</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>showSubComponent <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">duration</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">500</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MySubComponent</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">VelocityComponent</span></span><span class="token punctuation">&gt;</span></span></code></pre></div><p>首先还是先用 <strong>yarn</strong> 或 <strong>npm</strong> 安装：</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">yarn</span> <span class="token function">add</span> velocity-react</code></pre></div><p>在下面的 demo 中，我们将创建一个很酷的动画输入。</p><p><img src="/15dcf4b0275a48bd9eb19f73a58132a8/react-animations-Velocity-React.gif" alt="Velocity"/></p><div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> VelocityComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;velocity-react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">VelocityLetter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> letter <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">VelocityComponent</span></span>
    <span class="token attr-name">runOnMount</span>
    <span class="token attr-name">animation</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">marginTop</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
    <span class="token attr-name">duration</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">500</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>letter<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>letter<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">VelocityComponent</span></span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">VelocityApp</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">letters</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function-variable function">onChange</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> letters <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    letters<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">l<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">VelocityLetter</span></span> <span class="token attr-name">letter</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>l<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">letters</span><span class="token operator">:</span> arr <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>App<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>onChange<span class="token punctuation">}</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>input<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>letters<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>letters<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> styles <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">input</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">marginBottom</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">,</span>
    <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
    <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> <span class="token string">&quot;#ddd&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">border</span><span class="token operator">:</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">outline</span><span class="token operator">:</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">letters</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">display</span><span class="token operator">:</span> <span class="token string">&quot;flex&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">140</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">letter</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">marginTop</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
    <span class="token literal-property property">whiteSpace</span><span class="token operator">:</span> <span class="token string">&quot;pre&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div><ul><li>从 <strong>velocity-react</strong> 中 <strong>import</strong> <code class="language-text">VelocityComponent</code>；</li><li>我们要创建一个可重复使用的组件来满足每个 <strong>letter</strong> 的动画；</li><li>在这个组件中，我们将 <strong>animation</strong> 的 <code class="language-text">opacity</code> 设为 <strong>1</strong>，<code class="language-text">marginTop</code> 设为 <strong>0</strong>，这些值代表着传入子组件的重写值，即当组件被创建时，组件的 <code class="language-text">opacity</code> 会由初始的 <strong>0</strong> 变为 <strong>1</strong>，<code class="language-text">marginTop</code> 会由初始的 <strong>100</strong> 变为 <strong>0</strong>，我们还设置了 <strong>500</strong> ms 的持续时间，最后值得一提的是 <code class="language-text">runOnMount</code> 属性，它的意思是在组件挂载或创建完后执行该动画；</li><li>其中的 <code class="language-text">onChange</code> 方法会获取用户的每次输入，并创建一个由 <strong>VelocityLetter</strong> 组成的新数组；</li><li>在 <code class="language-text">render</code> 中，我们就使用该数组在 <strong>UI</strong> 中渲染 <strong>letters</strong>；</li></ul><h2 id="总结" style="position:relative"><a href="#%E6%80%BB%E7%BB%93" aria-label="总结 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>总结</h2><p>总的来说，基本的动画，我会选择 <strong>JS style</strong>，复杂的动画，我更偏向 <strong>React Motion</strong>，而对于 <strong>React Native</strong>，我还是坚持使用 <strong>Animated</strong>，一旦 <strong>Animated</strong> 成熟，在 <strong>Web</strong> 中可能也会投入使用，目前，我很享受 <strong>React Motion</strong>。</p></div></div><style data-emotion="css 126avwq">.css-126avwq{margin-top:3rem;margin-right:auto;margin-bottom:0;margin-left:auto;padding:0 1rem;max-width:700px;}@media (min-width: 640px){.css-126avwq{padding:0;}}</style><div class="css-126avwq"><div id="disqus_thread"></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script async="" src="https://www.googletagmanager.com/gtag/js?id=null"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'null', {"send_page_view":false});
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/react-web-dong-hua-de-5-zhong-chuang-jian-fang-shi/";window.___webpackCompilationHash="1bb4d2f35052b2bdf419";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-93fd3ed1f0fd8e7c4d3e.js"],"app":["/app-dcd66d7a57f213152695.js"]};/*]]>*/</script><script src="/polyfill-93fd3ed1f0fd8e7c4d3e.js" nomodule=""></script><script src="/app-dcd66d7a57f213152695.js" async=""></script><script src="/framework-ce84720033a9c9539f75.js" async=""></script><script src="/webpack-runtime-712e64ddbe9339d7082e.js" async=""></script></body></html>